<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>资产微窗</title>
    <link rel="stylesheet" type="text/css" href="css/qrcode-index.css">
    <script type="text/javascript" src="js/jquery/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="js/jquery.pin.js"></script>
    <script type="text/javascript" src="js/hammer.min.js"></script>
    
</head>

<body>
   
   
    <section class="block-head">
     <div class="zcws">
        资产微窗
    </div>
    </header> 
        <div class="logowap">
            <img src="images/blue-icon/xiaoxingji.png">
        </div>
        <div class="block-head-inf">
            <p>
                <span>搜索代码</span>
                <span>HW-EPS-ZZZ-123456</span>
            </p>
            <p>
                <span>机柜位置</span>
                <span>湖东移动大楼-5楼机房-A1机柜</span>
            </p>
            <p>
                <span>设备数量</span>
                <span>7</span>
            </p>
            
        </div>
    </section>
    <div class="pin-wap">
        <div class="h-tab">
            <ul>
                
                <li ><a href="javascript:void(0)">设备列表</a>
                </li>
                <li class="current"><a href="javascript:void(0)">设备展示</a>
                </li>
            </ul>
        </div>
        <section class="b  " id="host">
           
            <!-- <div class="tip-con">
            <p class="login-tip">还没有登陆哦，先<a class="login-text" href="login.html">登陆</a>一下</p>
          </div> -->
            <div class="deal-list ">
                
            
                <div class="deal-list-item-sblbred">
                    <div class="deal-list-item-title sblb-title"><i class="i-cs-sb">严重</i>
                        <p>华为RH2288v2采集服务器-10</p> <i class="sb-ps"><span class="position">34U</span></i>
                    </div>
                    <div class="deal-list-item-detail">
                    <span> 设备厂商:xxPDU</span>
                    <span>  设备型号：RH2288V2</span>
                    <span>  CPU: 40%</span>
                    <span>  内存 : 100%</span>
                    <span>  磁盘 : 30%</span>
                    </div>
                   
                </div>
                <div class="deal-list-item-sblbred sb-yellow">
                    <div class="deal-list-item-title sblb-title"><i class="slight ">轻微</i>
                        <p>华为RH2288v2采集服务器-10</p> <i class="sb-ps"><span class="position">34U</span></i>
                    </div>
                    <div class="deal-list-item-detail">
                    <span> 设备厂商:xxPDU</span>
                    <span>  设备型号：RH2288V2</span>
                    <span>  CPU: 40%</span>
                    <span>  内存 : 100%</span>
                    <span>  磁盘 : 30%</span>
                    </div>
                   
                </div>  
                

                <div class="deal-list-item-sblbred sb-commonly">
                    <div class="deal-list-item-title sblb-title"><i class="commonly ">一般</i>
                        <p>华为RH2288v2采集服务器-10</p> <i class="sb-ps"><span class="position">34U</span></i>
                    </div>
                    <div class="deal-list-item-detail">
                    <span> 设备厂商:xxPDU</span>
                    <span>  设备型号：RH2288V2</span>
                    <span>  CPU: 40%</span>
                    <span>  内存 : 100%</span>
                    <span>  磁盘 : 30%</span>
                    </div>
                   
                </div>  

                 <div class="deal-list-item-sblbred sb-normal">
                    <div class="deal-list-item-title sblb-title"><i class="normal ">正常</i>
                        <p>华为RH2288v2采集服务器-10</p> <i class="sb-ps"><span class="position">34U</span></i>
                    </div>
                    <div class="deal-list-item-detail">
                    <span> 设备厂商:xxPDU</span>
                    <span>  设备型号：RH2288V2</span>
                    <span>  CPU: 40%</span>
                    <span>  内存 : 100%</span>
                    <span>  磁盘 : 30%</span>
                    </div>
                   
                </div>  
                
                
            </div>
        </section>
            <section  class="b active" >


               <div class="tab-toggle-wap">
                    <div class="tab-toggle">
                       <a  class="sel" href="javascript:void(0)">背板</a>
                       <a   href="javascript:void(0)">名称</a>
                   </div>
               </div>
                <canvas id="jg" style=" margin:0 auto;display: block; width:100%;max-width: 429px" ></canvas>
                    
             </section>
       
      
    <footer>
        <div class="foot-inner">
            <p>福建移动</p>
            <p>CopyRight©2016</p>          
        </div>
    </footer>
    <div class="scrollbg"></div>
    <div class="pop-dialog-wap">
        <div class="pop-dialog">
            <div class="title">
            </div>
            <div class="con-wap">
                <p class="con">
                </p>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="js/myjf1.js"></script>
    <script type="text/javascript" src="js/data1.js"></script>
<script type="text/javascript">
    var s=myJF.mCabinet('jg',data);
 s.draw();

 var equip=s.getmEquip();
 for(var i=0,l=equip.length;i<l;i++){
    equip[i].addEventListener('click',function(){
    console.log(this.prop.equipId);
    })
 }
 $(".tab-toggle").on("click",function(e){
    $current=$(e.target);
    if($current.hasClass("sel"))  return true;
    var  children =s.children;
    switch($current.index()){
        case 0: 
            s.setEquipIsShowText(false);
        break;
        case 1:  

            s.setEquipIsShowText(true);
        break;
    }
     $(".tab-toggle .sel").removeClass("sel");
    $current.addClass("sel");
 });
</script>
    <script type="text/javascript">
    $(function() {
        var scrollTag = false;
        var th = Math.ceil(parseInt($(".h-tab ul").outerHeight()));
        $(".b").css("min-height", $(window).height() - th - $("footer").outerHeight());
        $("#h-serveinf").find(".hextend").addClass("block-show").end().find(".block-detail").show();
        $(".virtualmachine:first-child").find(".hextend").addClass("block-show").end().find(".block-detail").show();
        // $("footer").css({
        //     "padding": "0",
        //     "visibility": "hidden",
        //     "height": "1px"
        // }) 
        $(".block-head-b").each(function() {
            $(this).pin({
                containerSelector: ".pincontain",
                padding: {
                    top: $(".h-tab ul").outerHeight(),
                    bottom: 100
                }
            });
        });
        $(".h-tab ul").pin({
            containerSelector: ".pin-wap",
            padding: {
                top: 0,
                bottom: 100
            }
        });
        $(".h-tab  ul li").on("click", function() {
                if ($(this).hasClass("active")) return;
                var index = $(this).index();
                $(".h-tab  li").removeClass("current");
                $(this).addClass("current");
                $(".b.active").removeClass("active");
                $(".b").eq(index).slideDown(function() {
                    $(this).css("display", "");
                }).addClass("active");
                $(document).scrollTop(Math.ceil($(".h-tab").offset().top));
                $(".block-head").hide(); 
            });
            //虚拟机 更多 
        $("#vm .vmore").on("click", function(e) {
            // body... 
            if ($(this).hasClass("inf-more")) {
                $(this).addClass("inf-normal").removeClass("inf-more");
            } else {
                $(this).removeClass("inf-normal").addClass("inf-more");
            }
            return false;
        });
        //告警更多
        $("#alarm .vmore-wap").on("click", function() {
            var $vmore = $(this).children(".vmore");
            if ($vmore.hasClass("inf-more")) {
                $(this).children("span").text("更多");
                $vmore.addClass("inf-normal").removeClass("inf-more");
            } else {
                $vmore.removeClass("inf-normal").addClass("inf-more");
                $(this).children("span").text("收缩");
            }
        });
        //头部收缩
        $(".block-head-b").on("click", function() {
            // body...
            var $head = $(this),
                $extend = $head.find(".hextend"),
                $container = $head.parents(".pincontain"),
                $con = $container.find(".block-detail");
            if ($extend.hasClass("block-show")) {
                $extend.addClass("block-hide").removeClass("block-show");
                $con.slideUp(1100, 'swing');
            } else {
                $extend.removeClass("block-hide").addClass("block-show");
                $con.slideDown(1100, 'swing');
            }
        });
        $(" [limit-title='true']").on("click", function() {
            $(".pop-dialog-wap").css("display", "flex");
            $(".pop-dialog-wap").find(".title").text($(this).parents(".block-detail-item").find("span").text());
            $(".pop-dialog-wap").find(".con").text($(this).attr("title-all"));
        });
        $(".pop-dialog-wap").on("click", function(e) {
            if ($(e.target).parents(".pop-dialog").length <= 0 && $(e.target) !== $(".pop-dialog"))
                $(".pop-dialog-wap").hide();
        });
        $(".i-filter").on("click" ,function(){
                    $(".filter-box").toggle();
        });
 
        Hammer.defaults.touchAction = "auto";
        var mc = new Hammer($(".pin-wap")[0]);
        mc.get('pan').set({
            direction: Hammer.DIRECTION_ALL
        });
        mc.on("panstart panmove panend pancancel", function(ev) {
            scroll(ev);
        });
        var scroll = function(ev) {
            if (ev.type == "panend") {
                if (ev.additionalEvent == "panright" || ev.additionalEvent == "panleft") {
                    var tag = ev.additionalEvent == "panright" ? 1 : -1;
                    var $target = $(".b.active");
                    var index = ($target.index(".b") + $(".b").length + tag) % $(".b").length;
                    $(".b").removeClass("active").eq(index).addClass("active");
                    $(".h-tab .current").removeClass("current");
                    $(".h-tab li").eq(index).addClass("current");
                    $(".block-head").hide(); 
                } else if (ev.additionalEvent == "pandown") {
                    if ($(".b.active").is("#host") && $(window).scrollTop() === 0) {
                        $(".block-head").show();
                    }
                }
            }
        };

     
        
    });
 
    </script>
    
</body>

</html>
